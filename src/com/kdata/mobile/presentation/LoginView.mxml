<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx"
		 xmlns:sf="http://www.spicefactory.org/parsley"
		 width="100%" height="100%">
	
	<fx:Declarations>		
		<sf:Configure />		
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[			
			import com.kdata.mobile.MongoConfig;
			import com.kdata.mobile.application.InitEvent;
			import com.kdata.mobile.application.MongoQueryEvent;
						
			[MessageDispatcher] public var dispatchMessage : Function;
			
			[Inject] [Bindable] public var config : MongoConfig;
			
			public function login() : void {
				
				config.dbHost = txtServerAdress.text;
				config.dbPort = uint(txtServerPort.text);
				config.dbUser = txtServerUserName.text;
				config.dbPassword = txtServerPassword.text;
				config.dbName = txtServerDBName.text;
				
				// connect to MongoDB
				dispatchMessage( InitEvent.getAppReady() );
			}				
		]]>
	</fx:Script>
	
	<s:Form horizontalCenter="0" verticalCenter="0">
		<s:FormHeading label="Connection info"/>
		<s:FormItem label="Host">
			<s:TextInput id="txtServerAdress" text="{config.dbHost}" width="150" />
		</s:FormItem>
		<s:FormItem label="Port">
			<s:TextInput id="txtServerPort" text="{config.dbPort}" width="150" />
		</s:FormItem>
		<s:FormItem label="DBName">
			<s:TextInput id="txtServerDBName" text="{config.dbName}" width="150" />
		</s:FormItem>
		<s:FormItem label="UserName">
			<s:TextInput id="txtServerUserName" text="{config.dbUser}" width="150" />
		</s:FormItem>
		<s:FormItem label="Password">
			<s:TextInput id="txtServerPassword" text="{config.dbPassword}" width="150" />
		</s:FormItem>		
		<s:HGroup>
			<s:Button id="btnConnect" label="Connect" click="login()" />
		</s:HGroup>
	</s:Form>
	
</s:View>
